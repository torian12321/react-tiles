(this["webpackJsonpreact-tiles"]=this["webpackJsonpreact-tiles"]||[]).push([[0],{12:function(e,n,t){e.exports={btn:"BtnReset_btn__9ZNb5",disabled:"BtnReset_disabled__2z6ma"}},16:function(e,n,t){e.exports={board:"Board_board__kNpEF",row:"Board_row__2hIxt"}},29:function(e,n,t){},33:function(e,n,t){},34:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),c=t(8),o=t.n(c),u=t(3),a=(t(29),t(1)),s=t(4),d=function(e){return e.board||e||{}},l=Object(s.a)(d,(function(e){return e.options||{}})),f=Object(s.a)(d,(function(e){return e.selectedArea||{}})),b=Object(s.a)(d,(function(e){return e.tiles||{}})),v=Object(s.a)(b,(function(e){return e.allIds||[]})),p=Object(s.a)(b,(function(e){return e.byIds||{}})),j=function(e,n){var t=p(e)[n]||{};return Object(a.a)(Object(a.a)({},t),{},{selected:h(e,n)})},O=Object(s.a)(p,(function(e){return Object.values(e).filter((function(e){return!!e.flipped})).map((function(e){return e.id}))})),m=Object(s.a)([p,f],(function(e,n){var t=n.iniTile,r=n.endTile,i=Object.values(e);if(!t||!r)return[];if(t===r)return[t];var c=function(e,n,t){return!!(e>=n&&e<=t||e>=t&&e<=n)},o=i.find((function(e){return e.id===t})),u=i.find((function(e){return e.id===r}));return i.filter((function(e){return c(e.x,o.x,u.x)&&c(e.y,o.y,u.y)})).map((function(e){return e.id}))})),h=function(e,n){return!!m(e).includes(n)},g="BOARD_RESET",_="BOARD_SELECTEDAREA_UNSET",T="BOARD_SELECTEDAREA_SET_INI",y="BOARD_SELECTEDAREA_SET_END",E="TILES_TOGGLE",P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:E,payload:{ids:e,flipped:n}}},x=function(e){return function(n,t){var r=t(),i=j(r,e);n(P(function(e,n){var t=b(e).byIds||{};return Object.values(t).filter((function(e){return e.y===n}))}(r,i.y).map((function(e){return e.id})),!i.flipped))}},C=function(){return{type:_}},A=function(e){return function(n,t){var r=t();f(r).iniTile&&n(function(e){return{type:y,payload:{endTile:e}}}(e))}},D=t(11),L=t(10),w=t.n(L),S=t(7),k=t.n(S),M=t(17),N=t(20),I=function(){var e=Object(r.useRef)([]);return{appendPendingPromise:function(n){return e.current=[].concat(Object(N.a)(e.current),[n])},removePendingPromise:function(n){return e.current=e.current.filter((function(e){return e!==n}))},clearPendingPromises:function(){return e.current.map((function(e){return e.cancel()}))}}},R=function(e,n,t){var r=I(),i=Object(M.get)(t,"delay",250);return[function(){r.clearPendingPromises();var n=function(e){var n=!1;return{promise:new Promise((function(t,r){e.then((function(e){return n?r({isCanceled:n,value:e}):t(e)}),(function(e){return r({isCanceled:n,error:e})}))})),cancel:function(){return n=!0}}}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;return new Promise((function(n){return setTimeout(n,e)}))}(i));return r.appendPendingPromise(n),n.promise.then((function(){r.removePendingPromise(n),e()})).catch((function(e){if(r.removePendingPromise(n),!e.isCanceled)throw e.error}))},function(){r.clearPendingPromises(),n()}]},B=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()},F=function(e){var n=e.onClick,t=e.onLongPress,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=i.shouldPreventDefault,o=void 0===c||c,u=i.delay,a=void 0===u?100:u,s=Object(r.useState)(!1),d=Object(D.a)(s,2),l=d[0],f=d[1],b=Object(r.useRef)(),v=Object(r.useRef)(),p=Object(r.useCallback)((function(e){o&&e.target&&(e.target.addEventListener("touchend",B,{passive:!1}),v.current=e.target),b.current=setTimeout((function(){t(e),f(!0)}),a)}),[t,a,o]),j=Object(r.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b.current&&clearTimeout(b.current),t&&!l&&n(),f(!1),o&&v.current&&v.current.removeEventListener("touchend",B)}),[o,n,l]);return{onMouseDown:function(e){return p(e)},onTouchStart:function(e){return p(e)},onMouseUp:function(e){return j(e)},onMouseLeave:function(e){return j(e,!1)},onTouchEnd:function(e){return j(e)}}},U=t(2),G=function(e){var n=e.id,t=e.isFlipped,r=void 0!==t&&t,i=e.isSelected,c=void 0!==i&&i,o=e.onClick,u=void 0===o?function(e){}:o,s=e.onDoubleClick,d=void 0===s?function(e){}:s,l=e.onMouseEnter,f=void 0===l?function(e){}:l,b=e.onLongPress,v=void 0===b?function(e){}:b,p=e.onMouseUp,j=void 0===p?function(e){}:p,O=R(u,d),m=Object(D.a)(O,2),h=(m[0],m[1]),g=F({onLongPress:v,onClick:u});return Object(U.jsx)("div",{onMouseEnter:function(){return f()},onMouseUp:function(){return j()},className:w()(k.a.wrapper,r&&k.a.flipped,c&&k.a.selected),children:Object(U.jsx)("button",Object(a.a)(Object(a.a)({"aria-label":"tile-".concat(n)},g),{},{onDoubleClick:h,className:k.a.tile,children:n}))})},J=Object(u.b)((function(e,n){var t=j(e,n.id);return{id:t.id,isFlipped:t.flipped,isSelected:t.selected}}),(function(e,n){return{onClick:function(){return e((t=n.id,function(e,n){var r=n(),i=j(r,t);e(P([i.id],!i.flipped))}));var t},onDoubleClick:function(){return e(x(n.id))},onMouseEnter:function(){return e(A(n.id))},onLongPress:function(){var t;e((t=n.id,{type:T,payload:{iniTile:t}})),e(A(n.id))},onMouseUp:function(){e((function(e,n){var t=n(),r=f(t).iniTile;if(r){var i=j(t,r);e(P(m(t),!i.flipped))}})),e(C())}}}))(i.a.memo(G)),W=t(16),Z=t.n(W),z=function(e){var n=e.tiles,t=void 0===n?[]:n;return Object(U.jsx)("div",{className:Z.a.row,children:t.map((function(e){return Object(U.jsx)(J,{id:e},e)}))})},V=function(e){var n=e.tiles,t=void 0===n?[]:n,r=e.columns,i=e.onMouseLeave,c=void 0===i?function(){}:i;return Object(U.jsx)("div",{className:Z.a.board,onMouseLeave:function(){c()},children:function(e,n){for(var t=0,r=[];t<e.length;)t%n===0&&r.push([]),r[r.length-1].push(e[t++]);return r}(t,r).map((function(e,n){return Object(U.jsx)(z,{tiles:e},"row_".concat(n))}))})},q=Object(u.b)((function(e){return{tiles:v(e),columns:l(e).columns}}),(function(e){return{onMouseLeave:function(){return e(C())}}}))(i.a.memo(V)),H=t.p+"static/media/undo.39673a2b.svg",K=t(12),Q=t.n(K),X=function(e){var n=e.className,t=e.disabled,r=void 0!==t&&t,i=e.onClick,c=void 0===i?function(){}:i;return Object(U.jsx)("button",{"aria-label":"reset",disabled:r,onClick:function(){r||c()},className:w()(Q.a.btn,r&&Q.a.disabled,n),children:Object(U.jsx)("img",{src:H,alt:"reset",className:Q.a.logo})})},Y=Object(u.b)((function(e){return{disabled:!O(e).length}}),(function(e){return{onClick:function(){return e({type:g})}}}))(i.a.memo(X)),$=(t(33),function(){return Object(U.jsx)("div",{className:"App",children:Object(U.jsxs)("header",{className:"App-header",children:[Object(U.jsx)(q,{}),Object(U.jsx)(Y,{})]})})}),ee=t(5),ne=t(18),te=t(19),re={iniTile:void 0,endTile:void 0},ie={tiles:function(e){for(var n={},t=[],r=0,i=0;i<e;i++)for(var c=0;c<e;c++){var o=r.toString();t.push(o),n[r]={id:o,x:i,y:c,flipped:!1},r++}return{allIds:t,byIds:n}}(6),options:{columns:6,rows:6},selectedArea:re},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case E:var t=n.payload,r=t.ids,i=void 0===r?[]:r,c=t.flipped,o={};return i.forEach((function(n){var t=j(e,n);o[t.id]=Object(a.a)(Object(a.a)({},t),{},{flipped:c})})),Object(a.a)(Object(a.a)({},e),{},{tiles:Object(a.a)(Object(a.a)({},e.tiles),{},{byIds:Object(a.a)(Object(a.a)({},e.tiles.byIds),o)})});case T:var u=n.payload.iniTile,s=void 0===u?void 0:u;return Object(a.a)(Object(a.a)({},e),{},{selectedArea:Object(a.a)(Object(a.a)({},e.selectedArea),{},{iniTile:s})});case y:var d=n.payload.endTile,l=void 0===d?void 0:d;return Object(a.a)(Object(a.a)({},e),{},{selectedArea:Object(a.a)(Object(a.a)({},e.selectedArea),{},{endTile:l})});case _:return Object(a.a)(Object(a.a)({},e),{},{selectedArea:re});case g:return ie;default:return e}},oe={name:"aitor"},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,n=arguments.length>1?arguments[1]:void 0;return n.type,e},ae=Object(ee.combineReducers)({common:ue,board:ce}),se=Object(ee.createStore)(ae,Object(te.composeWithDevTools)(Object(ee.applyMiddleware)(ne.a))),de=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,35)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),i(e),c(e),o(e)}))},le=document.getElementById("root");o.a.render(Object(U.jsx)(i.a.StrictMode,{children:Object(U.jsx)(u.a,{store:se,children:Object(U.jsx)($,{})})}),le),de()},7:function(e,n,t){e.exports={wrapper:"Tile_wrapper__ZVNjO",tile:"Tile_tile__2AylM",flipped:"Tile_flipped__2c1c5",selected:"Tile_selected__9WI05"}}},[[34,1,2]]]);
//# sourceMappingURL=main.a3696bf0.chunk.js.map