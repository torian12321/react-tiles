(this["webpackJsonpreact-tiles"]=this["webpackJsonpreact-tiles"]||[]).push([[0],{13:function(e,n,t){e.exports={btn:"BtnReset_btn__9ZNb5",disabled:"BtnReset_disabled__2z6ma"}},17:function(e,n,t){e.exports={board:"Board_board__kNpEF",row:"Board_row__2hIxt"}},18:function(e,n,t){e.exports={App:"App_App__1JN69",content:"App_content__1GxqD"}},5:function(e,n,t){e.exports={wrapper:"Tile_wrapper__ZVNjO",selected:"Tile_selected__9WI05",panel:"Tile_panel__a7ZlV",front:"Tile_front__2rT6g",back:"Tile_back__27OT-",flipped:"Tile_flipped__2c1c5",box1:"Tile_box1__MZJ3q",box2:"Tile_box2__3nON7"}},61:function(e,n,t){},62:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),c=t(10),o=t.n(c),u=t(4),a=t(2),s=t(6),l=function(e){return e.board||e||{}},d=Object(s.a)(l,(function(e){return e.options||{}})),f=Object(s.a)(l,(function(e){return e.selectedArea||{}})),b=Object(s.a)(l,(function(e){return e.tiles||{}})),p=Object(s.a)(b,(function(e){return e.allIds||[]})),v=Object(s.a)(b,(function(e){return e.byIds||{}})),j=function(e,n){var t=v(e)[n]||{};return Object(a.a)(Object(a.a)({},t),{},{selected:_(e,n)})},O=Object(s.a)(v,(function(e){return Object.values(e).filter((function(e){return!!e.flipped})).map((function(e){return e.id}))})),m=Object(s.a)([v,f],(function(e,n){var t=n.iniTile,r=n.endTile,i=Object.values(e);if(!t||!r)return[];if(t===r)return[t];var c=function(e,n,t){return!!(e>=n&&e<=t||e>=t&&e<=n)},o=i.find((function(e){return e.id===t})),u=i.find((function(e){return e.id===r}));return i.filter((function(e){return c(e.x,o.x,u.x)&&c(e.y,o.y,u.y)})).map((function(e){return e.id}))})),_=function(e,n){return!!m(e).includes(n)},h=t(27),g=t.n(h),T="BOARD_RESET",x="BOARD_SELECTEDAREA_UNSET",E="BOARD_SELECTEDAREA_SET_INI",y="BOARD_SELECTEDAREA_SET_END",P="TILES_TOGGLE",A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:P,payload:{ids:e,flipped:n}}},N=function(e){return function(n,t){var r=t(),i=j(r,e);n(A(function(e,n){var t=b(e).byIds||{};return Object.values(t).filter((function(e){return e.y===n}))}(r,i.y).map((function(e){return e.id})),!i.flipped))}},C=function(){return{type:x}},k=function(e){return function(n,t){var r=t();f(r).iniTile&&n(function(e){return{type:y,payload:{endTile:e}}}(e))}},D=t(7),L=t(12),S=t.n(L),w=t(5),M=t.n(w),I=t(28),R=t(31),B=function(){var e=Object(r.useRef)([]);return{appendPendingPromise:function(n){return e.current=[].concat(Object(R.a)(e.current),[n])},removePendingPromise:function(n){return e.current=e.current.filter((function(e){return e!==n}))},clearPendingPromises:function(){return e.current.map((function(e){return e.cancel()}))}}},F=function(e,n,t){var r=B(),i=Object(I.get)(t,"delay",250);return[function(){r.clearPendingPromises();var n=function(e){var n=!1;return{promise:new Promise((function(t,r){e.then((function(e){return n?r({isCanceled:n,value:e}):t(e)}),(function(e){return r({isCanceled:n,error:e})}))})),cancel:function(){return n=!0}}}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;return new Promise((function(n){return setTimeout(n,e)}))}(i));return r.appendPendingPromise(n),n.promise.then((function(){r.removePendingPromise(n),e()})).catch((function(e){if(r.removePendingPromise(n),!e.isCanceled)throw e.error}))},function(){r.clearPendingPromises(),n()}]},U=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()},J=function(e){var n=e.onClick,t=e.onLongPress,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=i.shouldPreventDefault,o=void 0===c||c,u=i.delay,a=void 0===u?300:u,s=Object(r.useState)(!1),l=Object(D.a)(s,2),d=l[0],f=l[1],b=Object(r.useRef)(),p=Object(r.useRef)(),v=Object(r.useCallback)((function(e){o&&e.target&&(e.target.addEventListener("touchend",U,{passive:!1}),p.current=e.target),b.current=setTimeout((function(){t(e),f(!0)}),a)}),[t,a,o]),j=Object(r.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b.current&&clearTimeout(b.current),t&&!d&&n(),f(!1),o&&p.current&&p.current.removeEventListener("touchend",U)}),[o,n,d]);return{onMouseDown:function(e){return v(e)},onTouchStart:function(e){return v(e)},onMouseUp:function(e){return j(e)},onMouseLeave:function(e){return j(e,!1)},onTouchEnd:function(e){return j(e)}}},Z=t(1),G=function(e){var n=e.id,t=e.isFlipped,r=void 0!==t&&t,i=e.isSelected,c=void 0!==i&&i,o=e.onClick,u=void 0===o?function(e){}:o,s=e.onDoubleClick,l=void 0===s?function(e){}:s,d=e.onMouseEnter,f=void 0===d?function(e){}:d,b=e.onLongPress,p=void 0===b?function(e){}:b,v=e.onMouseUp,j=void 0===v?function(e){}:v,O=F(u,l),m=Object(D.a)(O,2),_=(m[0],m[1]),h=J({onLongPress:p,onClick:u});return Object(Z.jsx)("div",{onMouseEnter:function(){return f()},onMouseUp:function(){return j()},className:S()(M.a.wrapper,r&&M.a.flipped,c&&M.a.selected),children:Object(Z.jsxs)("button",Object(a.a)(Object(a.a)({"aria-label":"tile-".concat(n)},h),{},{onDoubleClick:_,className:M.a.panel,children:[Object(Z.jsx)("div",{className:M.a.front,children:Object(Z.jsx)("div",{className:M.a.box1})}),Object(Z.jsx)("div",{className:M.a.back,children:Object(Z.jsx)("div",{className:M.a.box2})})]}))})},q=Object(u.b)((function(e,n){var t=j(e,n.id);return{id:t.id,isFlipped:t.flipped,isSelected:t.selected}}),(function(e,n){return{onClick:function(){return e((t=n.id,function(e,n){var r=n(),i=j(r,t);e(A([i.id],!i.flipped))}));var t},onDoubleClick:function(){return e(N(n.id))},onMouseEnter:function(){return e(k(n.id))},onLongPress:function(){var t;e((t=n.id,{type:E,payload:{iniTile:t}})),e(k(n.id))},onMouseUp:function(){e((function(e,n){var t=n(),r=f(t).iniTile;if(r){var i=j(t,r);e(A(m(t),!!i.flipped))}})),e(C())}}}))(i.a.memo(G)),V=t(17),W=t.n(V),z=function(e){var n=e.tiles,t=void 0===n?[]:n;return Object(Z.jsx)("div",{className:W.a.row,children:t.map((function(e){return Object(Z.jsx)(q,{id:e},e)}))})},H=function(e){var n=e.tiles,t=void 0===n?[]:n,r=e.columns,i=e.onMouseLeave,c=void 0===i?function(){}:i;return Object(Z.jsx)("div",{className:W.a.board,onMouseLeave:function(){c()},children:function(e,n){for(var t=0,r=[];t<e.length;)t%n===0&&r.push([]),r[r.length-1].push(e[t++]);return r}(t,r).map((function(e,n){return Object(Z.jsx)(z,{tiles:e},"row_".concat(n))}))})},K=Object(u.b)((function(e){return{tiles:p(e),columns:d(e).columns}}),(function(e){return{onMouseLeave:function(){return e(C())}}}))(i.a.memo(H)),Q=t.p+"static/media/undo.1fd9fbea.svg",X=t(13),Y=t.n(X),$=function(e){var n=e.className,t=e.disabled,r=void 0!==t&&t,i=e.onClick,c=void 0===i?function(){}:i;return Object(Z.jsx)("button",{"aria-label":"reset",disabled:r,onClick:function(){r||c()},className:S()(Y.a.btn,r&&Y.a.disabled,n),children:Object(Z.jsx)("img",{src:Q,alt:"reset",className:Y.a.logo})})},ee=Object(u.b)((function(e){return{disabled:!O(e).length}}),(function(e){return{onClick:function(){return e({type:T})}}}))(i.a.memo($)),ne=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,t=Object(r.useState)(e),i=Object(D.a)(t,2),c=i[0],o=i[1];return Object(r.useEffect)((function(){var t=setTimeout((function(){o(e)}),n);return function(){clearTimeout(t)}}),[e,n]),c},te=t(18),re=t.n(te),ie=function(e){var n=e.tiles,t=ne(n,2e3);return Object(r.useEffect)((function(){console.log("aaaa",t),g.a.post("https://postman-echo.com/get?foo1=bar1&foo2=bar2",{tiles:t,firstName:"Fred",lastName:"Flintstone"}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}),[t]),Object(Z.jsx)("div",{className:re.a.App,children:Object(Z.jsxs)("div",{className:re.a.content,children:[Object(Z.jsx)(K,{}),Object(Z.jsx)(ee,{})]})})},ce=Object(u.b)((function(e){return{tiles:O(e)}}),{})(i.a.memo(ie)),oe=t(8),ue=t(29),ae=t(30),se={iniTile:void 0,endTile:void 0},le={tiles:function(e){for(var n={},t=[],r=0,i=0;i<e;i++)for(var c=0;c<e;c++){var o=r.toString();t.push(o),n[r]={id:o,x:i,y:c,flipped:!1},r++}return{allIds:t,byIds:n}}(6),options:{columns:6,rows:6},selectedArea:se},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case P:var t=n.payload,r=t.ids,i=void 0===r?[]:r,c=t.flipped,o={};return i.forEach((function(n){var t=j(e,n);o[t.id]=Object(a.a)(Object(a.a)({},t),{},{flipped:c})})),Object(a.a)(Object(a.a)({},e),{},{tiles:Object(a.a)(Object(a.a)({},e.tiles),{},{byIds:Object(a.a)(Object(a.a)({},e.tiles.byIds),o)})});case E:var u=n.payload.iniTile,s=void 0===u?void 0:u;return Object(a.a)(Object(a.a)({},e),{},{selectedArea:Object(a.a)(Object(a.a)({},e.selectedArea),{},{iniTile:s})});case y:var l=n.payload.endTile,d=void 0===l?void 0:l;return Object(a.a)(Object(a.a)({},e),{},{selectedArea:Object(a.a)(Object(a.a)({},e.selectedArea),{},{endTile:d})});case x:return Object(a.a)(Object(a.a)({},e),{},{selectedArea:se});case T:return le;default:return e}},fe={name:"Tiles App"},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,n=arguments.length>1?arguments[1]:void 0;return n.type,e},pe=Object(oe.combineReducers)({common:be,board:de}),ve=Object(oe.createStore)(pe,Object(ae.composeWithDevTools)(Object(oe.applyMiddleware)(ue.a))),je=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,63)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),i(e),c(e),o(e)}))},Oe=(t(61),document.getElementById("\ud83e\udd84"));o.a.render(Object(Z.jsx)(i.a.StrictMode,{children:Object(Z.jsx)(u.a,{store:ve,children:Object(Z.jsx)(ce,{})})}),Oe),je()}},[[62,1,2]]]);
//# sourceMappingURL=main.4790e4a0.chunk.js.map