(this["webpackJsonpreact-tiles"]=this["webpackJsonpreact-tiles"]||[]).push([[0],{14:function(e,n,t){e.exports={wrapper:"BoardOptions_wrapper__3kFHw",btn:"BoardOptions_btn__1MKSH"}},15:function(e,n,t){e.exports={btn:"BtnReset_btn__9ZNb5",disabled:"BtnReset_disabled__2z6ma"}},19:function(e,n,t){e.exports={board:"Board_board__kNpEF",row:"Board_row__2hIxt"}},20:function(e,n,t){e.exports={App:"App_App__1JN69",content:"App_content__1GxqD"}},5:function(e,n,t){e.exports={wrapper:"Tile_wrapper__ZVNjO",selected:"Tile_selected__9WI05",panel:"Tile_panel__a7ZlV",front:"Tile_front__2rT6g",back:"Tile_back__27OT-",flipped:"Tile_flipped__2c1c5",box1:"Tile_box1__MZJ3q",box2:"Tile_box2__3nON7"}},62:function(e,n,t){},63:function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i),c=t(11),o=t.n(c),u=t(4),a=t(2),s=t(7),l=function(e){return e.board||e||{}},d=Object(s.a)(l,(function(e){return e.options||{}})),f=Object(s.a)(l,(function(e){return e.selectedArea||{}})),b=Object(s.a)(l,(function(e){return e.tiles||{}})),p=Object(s.a)(b,(function(e){return e.allIds||[]})),j=Object(s.a)(b,(function(e){return e.byIds||{}})),v=function(e,n){var t=j(e)[n]||{};return Object(a.a)(Object(a.a)({},t),{},{selected:_(e,n)})},O=Object(s.a)(j,(function(e){return Object.values(e).filter((function(e){return!!e.flipped})).map((function(e){return e.id}))})),m=Object(s.a)([j,f],(function(e,n){var t=n.iniTile,i=n.endTile,r=Object.values(e);if(!t||!i)return[];if(t===i)return[t];var c=function(e,n,t){return!!(e>=n&&e<=t||e>=t&&e<=n)},o=r.find((function(e){return e.id===t})),u=r.find((function(e){return e.id===i}));return r.filter((function(e){return c(e.x,o.x,u.x)&&c(e.y,o.y,u.y)})).map((function(e){return e.id}))})),_=function(e,n){return!!m(e).includes(n)},h=t(29),g=t.n(h),T=t(12),x="BOARD_RESET",E="BOARD_GRID_SIZE_SET",y="BOARD_SELECTEDAREA_UNSET",S="BOARD_SELECTEDAREA_SET_INI",C="BOARD_SELECTEDAREA_SET_END",N="TILES_TOGGLE",P=function(e){return{type:E,payload:{size:e}}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:N,payload:{ids:e,flipped:n}}},A=function(e){return function(n,t){var i=t(),r=v(i,e);n(k(function(e,n){var t=b(e).byIds||{};return Object.values(t).filter((function(e){return e.y===n}))}(i,r.y).map((function(e){return e.id})),!r.flipped))}},w=function(){return{type:y}},D=function(e){return function(n,t){var i=t();f(i).iniTile&&n(function(e){return{type:C,payload:{endTile:e}}}(e))}},L=t(6),M=t.n(L),I=t(8),R=t(5),B=t.n(R),z=t(32),F=function(){var e=Object(i.useRef)([]);return{appendPendingPromise:function(n){return e.current=[].concat(Object(z.a)(e.current),[n])},removePendingPromise:function(n){return e.current=e.current.filter((function(e){return e!==n}))},clearPendingPromises:function(){return e.current.map((function(e){return e.cancel()}))}}},U=function(e,n,t){var i=F(),r=Object(T.get)(t,"delay",400);return[function(){i.clearPendingPromises();var n=function(e){var n=!1;return{promise:new Promise((function(t,i){e.then((function(e){return n?i({isCanceled:n,value:e}):t(e)}),(function(e){return i({isCanceled:n,error:e})}))})),cancel:function(){return n=!0}}}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400;return new Promise((function(n){return setTimeout(n,e)}))}(r));return i.appendPendingPromise(n),n.promise.then((function(){i.removePendingPromise(n),e()})).catch((function(e){if(i.removePendingPromise(n),!e.isCanceled)throw e.error}))},function(){i.clearPendingPromises(),n()}]},Z=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()},G=function(e){var n=e.onClick,t=void 0===n?function(){}:n,r=e.onLongPress,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=c.shouldPreventDefault,u=void 0===o||o,a=c.delay,s=void 0===a?100:a,l=Object(i.useState)(!1),d=Object(I.a)(l,2),f=d[0],b=d[1],p=Object(i.useRef)(),j=Object(i.useRef)(),v=Object(i.useCallback)((function(e){u&&e.target&&(e.target.addEventListener("touchend",Z,{passive:!1}),j.current=e.target),p.current=setTimeout((function(){r(e),b(!0)}),s)}),[r,s,u]),O=Object(i.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];p.current&&clearTimeout(p.current),n&&!f&&t(),b(!1),u&&j.current&&j.current.removeEventListener("touchend",Z)}),[u,t,f]);return{onMouseDown:function(e){return v(e)},onTouchStart:function(e){return v(e)},onMouseUp:function(e){return O(e)},onMouseLeave:function(e){return O(e,!1)},onTouchEnd:function(e){return O(e)}}},J=t(1),q=function(e){var n=e.id,t=e.isFlipped,i=void 0!==t&&t,r=e.isSelected,c=void 0!==r&&r,o=e.onClick,u=void 0===o?function(e){}:o,s=e.onDoubleClick,l=void 0===s?function(e){}:s,d=e.onMouseEnter,f=void 0===d?function(e){}:d,b=e.onLongPress,p=void 0===b?function(e){}:b,j=e.onMouseUp,v=void 0===j?function(e){}:j,O=U(u,l),m=Object(I.a)(O,2),_=m[0],h=m[1],g=G({onLongPress:p});return Object(J.jsx)("button",{onMouseEnter:function(){return f()},onMouseUp:function(){return v()},onClick:_,onDoubleClick:h,className:M()(B.a.wrapper,i&&B.a.flipped,c&&B.a.selected),children:Object(J.jsxs)("div",Object(a.a)(Object(a.a)({"aria-label":"tile-".concat(n),className:B.a.panel},g),{},{children:[Object(J.jsx)("div",{className:B.a.front,children:Object(J.jsx)("div",{className:B.a.box1})}),Object(J.jsx)("div",{className:B.a.back,children:Object(J.jsx)("div",{className:B.a.box2})})]}))})},H=Object(u.b)((function(e,n){var t=v(e,n.id);return{id:t.id,isFlipped:t.flipped,isSelected:t.selected}}),(function(e,n){return{onClick:function(){return e((t=n.id,function(e,n){var i=n(),r=v(i,t);e(k([r.id],!r.flipped))}));var t},onDoubleClick:function(){return e(A(n.id))},onMouseEnter:function(){return e(D(n.id))},onLongPress:function(){var t;e((t=n.id,{type:S,payload:{iniTile:t}})),e(D(n.id))},onMouseUp:function(){e((function(e,n){var t=n(),i=f(t).iniTile;if(i){var r=v(t,i);e(k(m(t),!!r.flipped))}})),e(w())}}}))(r.a.memo(q)),V=t(19),W=t.n(V),K=function(e){var n=e.tiles,t=void 0===n?[]:n;return Object(J.jsx)("div",{className:W.a.row,children:t.map((function(e){return Object(J.jsx)(H,{id:e},e)}))})},Q=function(e){var n=e.className,t=e.tiles,i=void 0===t?[]:t,r=e.columns,c=e.onMouseLeave,o=void 0===c?function(){}:c;return Object(J.jsx)("div",{className:M()(W.a.board,n),onMouseLeave:function(){o()},children:function(e,n){for(var t=0,i=[];t<e.length;)t%n===0&&i.push([]),i[i.length-1].push(e[t++]);return i}(i,r).map((function(e,n){return Object(J.jsx)(K,{tiles:e},"row_".concat(n))}))})},X=Object(u.b)((function(e){return{tiles:p(e),columns:d(e).columns}}),(function(e){return{onMouseLeave:function(){return e(w())}}}))(r.a.memo(Q)),Y=t(14),$=t.n(Y),ee=function(e){var n=e.label,t=e.disabled,i=void 0!==t&&t,r=e.onClick,c=void 0===r?function(){}:r;return Object(J.jsx)("button",{className:$.a.btn,disabled:i,onClick:function(){!i&&c&&c()},children:n})},ne=function(e){var n=e.className,t=e.setSizeS,i=void 0===t?function(){}:t,r=e.setSizeM,c=void 0===r?function(){}:r,o=e.setSizeL,u=void 0===o?function(){}:o;return Object(J.jsxs)("div",{className:M()($.a.wrapper,n),children:[Object(J.jsx)(ee,{onClick:i,label:"S"}),Object(J.jsx)(ee,{onClick:c,label:"M"}),Object(J.jsx)(ee,{onClick:u,label:"L"})]})},te=Object(u.b)((function(){return{}}),(function(e){return{setSizeS:function(){return e(P(4))},setSizeM:function(){return e(P(6))},setSizeL:function(){return e(P(8))}}}))(r.a.memo(ne)),ie=t.p+"static/media/undo.1fd9fbea.svg",re=t(15),ce=t.n(re),oe=function(e){var n=e.className,t=e.disabled,i=void 0!==t&&t,r=e.onClick,c=void 0===r?function(){}:r;return Object(J.jsx)("button",{"aria-label":"reset",disabled:i,onClick:function(){i||c()},className:M()(ce.a.btn,i&&ce.a.disabled,n),children:Object(J.jsx)("img",{src:ie,alt:"reset",className:ce.a.logo})})},ue=Object(u.b)((function(e){return{disabled:!O(e).length}}),(function(e){return{onClick:function(){return e({type:x})}}}))(r.a.memo(oe)),ae=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,t=Object(i.useState)(e),r=Object(I.a)(t,2),c=r[0],o=r[1];return Object(i.useEffect)((function(){var t=setTimeout((function(){o(e)}),n);return function(){clearTimeout(t)}}),[e,n]),c},se=t(20),le=t.n(se),de=function(e){var n=e.tiles,t=ae(n,2e3);return Object(i.useEffect)((function(){g.a.post("https://postman-echo.com/post",{tiles:t}).then((function(e){console.log(Object(T.get)(e,"data.data.tiles",[]))})).catch((function(e){console.log(e)}))}),[t]),Object(J.jsx)("div",{className:le.a.App,children:Object(J.jsxs)("div",{className:le.a.content,children:[Object(J.jsx)(te,{}),Object(J.jsx)(X,{}),Object(J.jsx)(ue,{})]})})},fe=Object(u.b)((function(e){return{tiles:O(e)}}),{})(r.a.memo(de)),be=t(9),pe=t(30),je=t(31),ve=function(e){for(var n={},t=[],i=0,r=0;r<e;r++)for(var c=0;c<e;c++){var o=i.toString();t.push(o),n[i]={id:o,x:r,y:c,flipped:!1},i++}return{allIds:t,byIds:n}},Oe={iniTile:void 0,endTile:void 0},me={tiles:ve(6),options:{columns:6,rows:6},selectedArea:Oe},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case N:var t=n.payload,i=t.ids,r=void 0===i?[]:i,c=t.flipped,o={};return r.forEach((function(n){var t=v(e,n);o[t.id]=Object(a.a)(Object(a.a)({},t),{},{flipped:c})})),Object(a.a)(Object(a.a)({},e),{},{tiles:Object(a.a)(Object(a.a)({},e.tiles),{},{byIds:Object(a.a)(Object(a.a)({},e.tiles.byIds),o)})});case E:var u=n.payload.size,s=void 0===u?6:u;return Object(a.a)(Object(a.a)({},e),{},{tiles:ve(s),options:Object(a.a)(Object(a.a)({},e.options),{},{columns:s,rows:s})});case S:var l=n.payload.iniTile,d=void 0===l?void 0:l;return Object(a.a)(Object(a.a)({},e),{},{selectedArea:Object(a.a)(Object(a.a)({},e.selectedArea),{},{iniTile:d})});case C:var f=n.payload.endTile,b=void 0===f?void 0:f;return Object(a.a)(Object(a.a)({},e),{},{selectedArea:Object(a.a)(Object(a.a)({},e.selectedArea),{},{endTile:b})});case y:return Object(a.a)(Object(a.a)({},e),{},{selectedArea:Oe});case x:return me;default:return e}},he={name:"Tiles App"},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,n=arguments.length>1?arguments[1]:void 0;return n.type,e},Te=Object(be.combineReducers)({common:ge,board:_e}),xe=Object(be.createStore)(Te,Object(je.composeWithDevTools)(Object(be.applyMiddleware)(pe.a))),Ee=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,64)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),i(e),r(e),c(e),o(e)}))},ye=(t(62),document.getElementById("\ud83e\udd84"));o.a.render(Object(J.jsx)(r.a.StrictMode,{children:Object(J.jsx)(u.a,{store:xe,children:Object(J.jsx)(fe,{})})}),ye),Ee()}},[[63,1,2]]]);
//# sourceMappingURL=main.0021968b.chunk.js.map